-- Airport Management System --
-- DB Design Fall 2016--

CREATE TABLE CITY
(City_Code VARCHAR2(9) NOT NULL,
City_Name VARCHAR2(15) NOT NULL,
STATE VARCHAR2(15), 
COUNTRY VARCHAR2(30),
PRIMARY KEY(City_Code));


-- Insering values of Table: CITY--
INSERT INTO CITY (City_Code, City_Name, STATE, COUNTRY) VALUES('LKUS','Louisville','Kentucky','United States');
INSERT INTO CITY (City_Code, City_Name, STATE, COUNTRY) VALUES('CCI','Chandigarh','Chandigarh','India');
INSERT INTO CITY (City_Code, City_Name, STATE, COUNTRY) VALUES('FWTUS','Fort Worth','Texas','United States');
INSERT INTO CITY (City_Code, City_Name, STATE, COUNTRY) VALUES('DDI','Delhi','Delhi','India');
INSERT INTO CITY (City_Code, City_Name, STATE, COUNTRY) VALUES('MMMI','Mumbai','Maharashtra','India');
INSERT INTO CITY (City_Code, City_Name, STATE, COUNTRY) VALUES('SFCUS','San Francisco', 'California', 'United States');
INSERT INTO CITY (City_Code, City_Name, STATE, COUNTRY) VALUES('FHG','Frankfurt','Hesse','Germany');
INSERT INTO CITY (City_Code, City_Name, STATE, COUNTRY) VALUES('HTUS','Houston','Texas','United States');
INSERT INTO CITY (City_Code, City_Name, STATE, COUNTRY) VALUES('NYCUS','New York City','New York','United States');
INSERT INTO CITY (City_Code, City_Name, STATE, COUNTRY) VALUES('TFUS','Tampa', 'Florida', 'United States');
INSERT INTO CITY (City_Code, City_Name, STATE, COUNTRY) VALUES('CTNI','Chennai', 'Tamil Nadu', 'India');

CREATE TABLE AIRPORT
(Airport_Name VARCHAR2(100) NOT NULL,
City_Code VARCHAR2(9) NOT NULL,
Airport_Code VARCHAR2(15), 
PRIMARY KEY(Airport_Code),
FOREIGN KEY(City_Code) REFERENCES CITY(City_Code) ON DELETE CASCADE);

--Insering values for Table: AIRPORT--

INSERT INTO AIRPORT (Airport_Name, Airport_Code, STATE, COUNTRY, City_Name) VALUES('Louisville International Airport','SDF','Kentucky','United States','Louisville');
INSERT INTO AIRPORT (Airport_Name, Airport_Code, STATE, COUNTRY, City_Name) VALUES('Chandigarh International Airport','IXC','Chandigarh','India','Chandigarh');
INSERT INTO AIRPORT (Airport_Name, Airport_Code, STATE, COUNTRY, City_Name) VALUES('Dallas/Fort Worth International Airport','DFW','Texas','United States','Fort Worth');
INSERT INTO AIRPORT (Airport_Name, Airport_Code, STATE, COUNTRY, City_Name) VALUES('Indira Gandhi International Airport','DEL','Delhi','India','Delhi');
INSERT INTO AIRPORT (Airport_Name, Airport_Code, STATE, COUNTRY, City_Name) VALUES('Chhatrapati Shivaji International Airport','BOM','Maharashtra','India','Mumbai');
INSERT INTO AIRPORT (Airport_Name, Airport_Code, STATE, COUNTRY, City_Name) VALUES('San Francisco International Airport','SFO','California', 'United States','San Francisco');
INSERT INTO AIRPORT (Airport_Name, Airport_Code, STATE, COUNTRY, City_Name) VALUES('Frankfurt Airport','FRA','Hesse','Germany','Frankfurt');
INSERT INTO AIRPORT (Airport_Name, Airport_Code, STATE, COUNTRY, City_Name) VALUES('George Bush Intercontinental Airport','IAH','Texas','United States','Houston');
INSERT INTO AIRPORT (Airport_Name, Airport_Code, STATE, COUNTRY, City_Name) VALUES('John F. Kennedy International Airport','JFK','New York','United States','New York City');
INSERT INTO AIRPORT (Airport_Name, Airport_Code, STATE, COUNTRY, City_Name) VALUES('Tampa International Airport','TPA','Florida', 'United States','Tampa');
INSERT INTO AIRPORT (Airport_Name, Airport_Code, STATE, COUNTRY, City_Name) VALUES('Chennai International Airport','MAA','Tamil Nadu', 'India','Chennai');


CREATE TABLE AIRLINE
(Airline_id VARCHAR(3) NOT NULL,
Airline_name VARCHAR2(50),
THREE_DIGIT_CODE VARCHAR(3),
PRIMARY KEY(Airline_id));

-- Insering values for Table: AIRLINE --
INSERT INTO AIRLINE (Airline_id, Airline_name, THREE_DIGIT_CODE) VALUES('AA','American Airlines','001');
INSERT INTO AIRLINE (Airline_id, Airline_name, THREE_DIGIT_CODE) VALUES('AI','Air India Limited','098');
INSERT INTO AIRLINE (Airline_id, Airline_name, THREE_DIGIT_CODE) VALUES('LH','Lufthansa', '220');
INSERT INTO AIRLINE (Airline_id, Airline_name, THREE_DIGIT_CODE) VALUES('BA','British Airways','125');
INSERT INTO AIRLINE (Airline_id, Airline_name, THREE_DIGIT_CODE) VALUES('QR','Qatar Airways','157');
INSERT INTO AIRLINE (Airline_id, Airline_name, THREE_DIGIT_CODE) VALUES('JW','Jet Airways','589');
INSERT INTO AIRLINE (Airline_id, Airline_name, THREE_DIGIT_CODE) VALUES('EK','Emirates','176');
INSERT INTO AIRLINE (Airline_id, Airline_name, THREE_DIGIT_CODE) VALUES('EY','Ethiad Airways','607');

CREATE TABLE DOCKED
(Airline_id VARCHAR(3) NOT NULL,
Airport_Name VARCHAR2(100) NOT NULL,
PRIMARY KEY(Airline_id),
FOREIGN KEY(Airline_id) REFERENCES AIRLINE(Airline_id) ON DELETE CASCADE,
FOREIGN KEY(Airport_Name) REFERENCES AIRPORT(Airport_Name) ON DELETE CASCADE);

-- Insering values into Table: DOCKED--

INSERT INTO DOCKED (Airline_id, Airport_Name) VALUES('AA','Louisville International Airport');
INSERT INTO DOCKED (Airline_id, Airport_Name) VALUES('AA','John F. Kennedy International Airport');
INSERT INTO DOCKED (Airline_id, Airport_Name) VALUES('AA','George Bush Intercontinental Airport');
INSERT INTO DOCKED (Airline_id, Airport_Name) VALUES('AA','San Francisco International Airport');
INSERT INTO DOCKED (Airline_id, Airport_Name) VALUES('AA','Tampa International Airport');
INSERT INTO DOCKED (Airline_id, Airport_Name) VALUES('AI','Chandigarh International Airport');
INSERT INTO DOCKED (Airline_id, Airport_Name) VALUES('AI','Dallas/Fort Worth International Airport');
INSERT INTO DOCKED (Airline_id, Airport_Name) VALUES('AI','Indira GandhiInternational Airport');
INSERT INTO DOCKED (Airline_id, Airport_Name) VALUES('AI','Chhatrapati Shivaji International Airport');
INSERT INTO DOCKED (Airline_id, Airport_Name) VALUES('AI','George Bush Intercontinental Airport');
INSERT INTO DOCKED (Airline_id, Airport_Name) VALUES('LH','Chhatrapati Shivaji International Airport');
INSERT INTO DOCKED (Airline_id, Airport_Name) VALUES('LH','Frankfurt Airport');
INSERT INTO DOCKED (Airline_id, Airport_Name) VALUES('LH','John F. Kennedy International Airport');
INSERT INTO DOCKED (Airline_id, Airport_Name) VALUES('LH','San Francisco International Airport');
INSERT INTO DOCKED (Airline_id, Airport_Name) VALUES('LH','Dallas/Fort Worth International Airport');
INSERT INTO DOCKED (Airline_id, Airport_Name) VALUES('BA','John F. Kennedy International Airport');
INSERT INTO DOCKED (Airline_id, Airport_Name) VALUES('BA','Chhatrapati Shivaji International Airport');
INSERT INTO DOCKED (Airline_id, Airport_Name) VALUES('BA','Chandigarh International Airport');
INSERT INTO DOCKED (Airline_id, Airport_Name) VALUES('BA','Frankfurt Airport');
INSERT INTO DOCKED (Airline_id, Airport_Name) VALUES('BA','San Francisco International Airport');
INSERT INTO DOCKED (Airline_id, Airport_Name) VALUES('QR','Chhatrapati Shivaji International Airport');
INSERT INTO DOCKED (Airline_id, Airport_Name) VALUES('QR','Dallas/Fort Worth International Airport');
INSERT INTO DOCKED (Airline_id, Airport_Name) VALUES('QR','John F. Kennedy International Airport');
INSERT INTO DOCKED (Airline_id, Airport_Name) VALUES('QR','Tampa International Airport');
INSERT INTO DOCKED (Airline_id, Airport_Name) VALUES('QR','Louisville International Airport');

CREATE TABLE FLIGHT
(Flight_Code VARCHAR(10) NOT NULL,
SOURCE VARCHAR(3),
DESTINATION VARCHAR(3),
DEPARTURE VARCHAR2(10),
ARRIVAL VARCHAR2(10),
stat VARCHAR(10),
DURATION VARCHAR2(30),
FLIGHTTYPE VARCHAR(10),
LAYOVER_TIME VARCHAR2(30),
NO_OF_STOPS INT,
Airline_id VARCHAR(3),
PRIMARY KEY(FLIGHT_CODE),
FOREIGN KEY(Airline_id) REFERENCES AIRLINE(Airline_id) ON DELETE CASCADE);


INSERT INTO FLIGHT(FLIGHT_CODE, SOURCE, DESTINATION, ARRIVAL, DEPARTURE, stat, DURATION, FLIGHTTYPE, LAYOVER_TIME, NO_OF_STOPS, Airline_id) VALUES('AI2014','BOM','DFW','02:10','03:15','On-time','24hr','Connecting',3,1,'AI');
INSERT INTO FLIGHT(FLIGHT_CODE, SOURCE, DESTINATION, ARRIVAL, DEPARTURE, stat, DURATION, FLIGHTTYPE, LAYOVER_TIME, NO_OF_STOPS, Airline_id) VALUES('QR2305','BOM','DFW','13:00','13:55','Delayed','21hr','Direct',0,0,'QR');
INSERT INTO FLIGHT(FLIGHT_CODE, SOURCE, DESTINATION, ARRIVAL, DEPARTURE, stat, DURATION, FLIGHTTYPE, LAYOVER_TIME, NO_OF_STOPS, Airline_id) VALUES('EY1234','JFK','TPA','19:20','20:05','On-time','3hrs','Connecting',5,2,'EY');
INSERT INTO FLIGHT(FLIGHT_CODE, SOURCE, DESTINATION, ARRIVAL, DEPARTURE, stat, DURATION, FLIGHTTYPE, LAYOVER_TIME, NO_OF_STOPS, Airline_id) VALUES('LH9876','JFK','BOM','05:50','06:35','On-time','18hrs','Direct',0,0,'LH');
INSERT INTO FLIGHT(FLIGHT_CODE, SOURCE, DESTINATION, ARRIVAL, DEPARTURE, stat, DURATION, FLIGHTTYPE, LAYOVER_TIME, NO_OF_STOPS, Airline_id) VALUES('BA1689','FRA','DEL','10:20','10:55','On-time','7hrs','Direct',0,0,'BA');
INSERT INTO FLIGHT(FLIGHT_CODE, SOURCE, DESTINATION, ARRIVAL, DEPARTURE, stat, DURATION, FLIGHTTYPE, LAYOVER_TIME, NO_OF_STOPS, Airline_id) VALUES('AA4367','SFO','FRA','18:10','18:55','On-time','11hrs','Direct',0,0,'AA');
INSERT INTO FLIGHT(FLIGHT_CODE, SOURCE, DESTINATION, ARRIVAL, DEPARTURE, stat, DURATION, FLIGHTTYPE, LAYOVER_TIME, NO_OF_STOPS, Airline_id) VALUES('QR1902','IXC','IAH','22:00','22:50','Delayed','28hrs','Direct',5,1,'QR');
INSERT INTO FLIGHT(FLIGHT_CODE, SOURCE, DESTINATION, ARRIVAL, DEPARTURE, stat, DURATION, FLIGHTTYPE, LAYOVER_TIME, NO_OF_STOPS, Airline_id) VALUES('BA3056','BOM','DFW','02:15','02:55','On-time','29hrs','Connecting',3,1,'BA');
INSERT INTO FLIGHT(FLIGHT_CODE, SOURCE, DESTINATION, ARRIVAL, DEPARTURE, stat, DURATION, FLIGHTTYPE, LAYOVER_TIME, NO_OF_STOPS, Airline_id) VALUES('EK3456','BOM','SFO','18:50','19:40','On-time','23hrs','Direct',0,0,'EK');
INSERT INTO FLIGHT(FLIGHT_CODE, SOURCE, DESTINATION, ARRIVAL, DEPARTURE, stat, DURATION, FLIGHTTYPE, LAYOVER_TIME, NO_OF_STOPS, Airline_id) VALUES('JW2334','IAH','DEL','23:00','13:45','On-time','18hrs','Direct',0,0,'9W');
INSERT INTO FLIGHT(FLIGHT_CODE, SOURCE, DESTINATION, ARRIVAL, DEPARTURE, stat, DURATION, FLIGHTTYPE, LAYOVER_TIME, NO_OF_STOPS, Airline_id) VALUES('JW2334','IAH','DEL','23:00','13:45','On-time','18hrs','Direct',0,0,'9W');



CREATE TABLE AVAIL_SEATS
(FLIGHT_CODE VARCHAR(10) NOT NULL,
TOTAL_SEATS VARCHAR(4),
AVAILABLE_SEATS VARCHAR(4),
PRIMARY KEY(FLIGHT_CODE),
FOREIGN KEY(FLIGHT_CODE) REFERENCES FLIGHT(FLIGHT_CODE) ON DELETE CASCADE);




INSERT INTO AVAIL_SEATS(FLIGHT_CODE, TOTAL_SEATS, AVAILABLE_SEATS, SOURCE, DESTINATION, ARRIVAL, DEPARTURE, stat, Airline_id) VALUES('JW2334', '1170', '43','IAH','DEL','23:00','13:45','On-time','9W');
INSERT INTO AVAIL_SEATS(FLIGHT_CODE, TOTAL_SEATS, AVAILABLE_SEATS, SOURCE, DESTINATION, ARRIVAL, DEPARTURE, stat, Airline_id) VALUES('EK3456','200','30','BOM','SFO','18:50','19:40','On-time','EK');
INSERT INTO AVAIL_SEATS(FLIGHT_CODE, TOTAL_SEATS, AVAILABLE_SEATS, SOURCE, DESTINATION, ARRIVAL, DEPARTURE, stat, Airline_id) VALUES('BA3056','150','29','BOM','DFW','02:15','02:55','On-time','BA');
INSERT INTO AVAIL_SEATS(FLIGHT_CODE, TOTAL_SEATS, AVAILABLE_SEATS, SOURCE, DESTINATION, ARRIVAL, DEPARTURE, stat, Airline_id) VALUES('QR1902','170','56','IXC','IAH','22:00','22:50','Delayed','QR');
INSERT INTO AVAIL_SEATS(FLIGHT_CODE, TOTAL_SEATS, AVAILABLE_SEATS, SOURCE, DESTINATION, ARRIVAL, DEPARTURE, stat, Airline_id) VALUES('AA4367','230','47','SFO','FRA','18:10','18:55','On-time','AA');
INSERT INTO AVAIL_SEATS(FLIGHT_CODE, TOTAL_SEATS, AVAILABLE_SEATS, SOURCE, DESTINATION, ARRIVAL, DEPARTURE, stat, Airline_id) VALUES('BA1689','250','90','FRA','DEL','10:20','10:55','On-time','BA');
INSERT INTO AVAIL_SEATS(FLIGHT_CODE, TOTAL_SEATS, AVAILABLE_SEATS, SOURCE, DESTINATION, ARRIVAL, DEPARTURE, stat, Airline_id) VALUES('LH9876','240','82','JFK','BOM','05:50','06:35','On-time','LH');
INSERT INTO AVAIL_SEATS(FLIGHT_CODE, TOTAL_SEATS, AVAILABLE_SEATS, SOURCE, DESTINATION, ARRIVAL, DEPARTURE, stat, Airline_id) VALUES('EY1234','170','65','JFK','TPA','19:20','20:05','On-time','LH');
INSERT INTO AVAIL_SEATS(FLIGHT_CODE, TOTAL_SEATS, AVAILABLE_SEATS, SOURCE, DESTINATION, ARRIVAL, DEPARTURE, stat, Airline_id) VALUES('QR2305','230','69','BOM','DFW','13:00','13:55','Delayed','QR');
INSERT INTO AVAIL_SEATS(FLIGHT_CODE, TOTAL_SEATS, AVAILABLE_SEATS, SOURCE, DESTINATION, ARRIVAL, DEPARTURE, stat, Airline_id) VALUES('AI2014','160','97','BOM','DFW','02:10','03:15','On-time','AI');


CREATE TABLE PASSENGER1
(PID INT NOT NULL,
PASSPORTNO VARCHAR(10) NOT NULL,
PRIMARY KEY(PID, PASSPORTNO));

-- Insering values in table: PASSENGER1--
INSERT INTO PASSENGER1(PID, PASSPORTNO) VALUES(1,'A1234568');
INSERT INTO PASSENGER1(PID, PASSPORTNO) VALUES(2,'B9876541');
INSERT INTO PASSENGER1(PID, PASSPORTNO) VALUES(3,'C2345698');
INSERT INTO PASSENGER1(PID, PASSPORTNO) VALUES(4,'D1002004');
INSERT INTO PASSENGER1(PID, PASSPORTNO) VALUES(5,'X9324666');
INSERT INTO PASSENGER1(PID, PASSPORTNO) VALUES(6,'B8765430');
INSERT INTO PASSENGER1(PID, PASSPORTNO) VALUES(7,'J9801235');
INSERT INTO PASSENGER1(PID, PASSPORTNO) VALUES(8,'A1122334');
INSERT INTO PASSENGER1(PID, PASSPORTNO) VALUES(9,'Q1243567');
INSERT INTO PASSENGER1(PID, PASSPORTNO) VALUES(10,'S1243269');
INSERT INTO PASSENGER1(PID, PASSPORTNO) VALUES(11,'E3277889');
INSERT INTO PASSENGER1(PID, PASSPORTNO) VALUES(12,'K3212322');
INSERT INTO PASSENGER1(PID, PASSPORTNO) VALUES(13,'P3452390');
INSERT INTO PASSENGER1(PID, PASSPORTNO) VALUES(14,'W7543336');
INSERT INTO PASSENGER1(PID, PASSPORTNO) VALUES(15,'R8990566');

CREATE TABLE PASSENGER2
(PASSPORTNO VARCHAR(10) NOT NULL,
FNAME VARCHAR2(20),
LNAME VARCHAR2(20),
HOME_ADDRESS VARCHAR2(100),
PHONE INT,
AGE INT,
SEX VARCHAR(1),
PRIMARY KEY(PASSPORTNO));

--iNSERTING VALUES IN TABLE: PASSENGER2--
INSERT INTO PASSENGER2(PASSPORTNO,FNAME,LNAME,HOME_ADDRESS,PHONE,AGE,SEX) VALUES('A1234568','PRANAV','ARORA','2230 NORTHSIDE, APT 11, ALBANY, NY',8080367290,30,'M');
INSERT INTO PASSENGER2(PASSPORTNO,FNAME,LNAME,HOME_ADDRESS,PHONE,AGE,SEX) VALUES('B9876541','ANKITA','AHIR','3456 VIKAS APTS, APT 102,DOMBIVLI, INDIA',8080367280,26,'F');
INSERT INTO PASSENGER2(PASSPORTNO,FNAME,LNAME,HOME_ADDRESS,PHONE,AGE,SEX) VALUES('C2345698','ABHINAV','RANA','7820 MCCALLUM COURTS, APT 234, AKRON, OH',8082267280,30,'F');
INSERT INTO PASSENGER2(PASSPORTNO,FNAME,LNAME,HOME_ADDRESS,PHONE,AGE,SEX) VALUES('D1002004','AKSHAT','SHARMA','7720 MCCALLUM BLVD, APT 1082, DALLAS, TX',9080367266,23,'F');
INSERT INTO PASSENGER2(PASSPORTNO,FNAME,LNAME,HOME_ADDRESS,PHONE,AGE,SEX) VALUES('X9324666','ANURAG','GUPTA','9082 ESTAES OF RICHARDSON, RICHARDSON, TX',9004360125,28,'F');
INSERT INTO PASSENGER2(PASSPORTNO,FNAME,LNAME,HOME_ADDRESS,PHONE,AGE,SEX) VALUES('B8765430','GAURAV','SINGH','1110 FIR HILLS, APT 903, AKRON, OH',7666190505,30,'F');
INSERT INTO PASSENGER2(PASSPORTNO,FNAME,LNAME,HOME_ADDRESS,PHONE,AGE,SEX) VALUES('J9801235','JIYA','MANCHANDA','345 CHATHAM COURTS, APT 678, MUMBAI, INDIA',9080369290,29,'M');
INSERT INTO PASSENGER2(PASSPORTNO,FNAME,LNAME,HOME_ADDRESS,PHONE,AGE,SEX) VALUES('A1122334','NIKHIL','GARG','5589 CHTHAM REFLECTIONS, APT 349 HOUSTON, TX',9004335126,25,'F');
INSERT INTO PASSENGER2(PASSPORTNO,FNAME,LNAME,HOME_ADDRESS,PHONE,AGE,SEX) VALUES('Q1243567','MEHAK','BHARADWAJ','4444 FRANKFORD VILLA, APT 77, GUILDERLAND, NY',9727626643,22,'M');
INSERT INTO PASSENGER2(PASSPORTNO,FNAME,LNAME,HOME_ADDRESS,PHONE,AGE,SEX) VALUES('S1243269','SANYA','SINGLA','7720 MCCALLUM BLVD, APT 2087, DALLAS, TX',9004568903,60,'M');
INSERT INTO PASSENGER2(PASSPORTNO,FNAME,LNAME,HOME_ADDRESS,PHONE,AGE,SEX) VALUES('E3277889','SUKRITI','BANSAL','1234 BAKER APTS, APT 59, HESSE, GERMANY',9724569986,10,'M');
INSERT INTO PASSENGER2(PASSPORTNO,FNAME,LNAME,HOME_ADDRESS,PHONE,AGE,SEX) VALUES('K3212322','PRABAL','SINGH','6785 SPLITSVILLA, APT 34, MIAMI, FL',9024569226,15,'F');
INSERT INTO PASSENGER2(PASSPORTNO,FNAME,LNAME,HOME_ADDRESS,PHONE,AGE,SEX) VALUES('P3452390','TANISHKA','CHOPRA','548 MARKET PLACE, SAN Francisco, CA',9734567800,10,'F');
INSERT INTO PASSENGER2(PASSPORTNO,FNAME,LNAME,HOME_ADDRESS,PHONE,AGE,SEX) VALUES('W7543336','DEEPANSHU','BATRA','6666 ROCK HILL, APT 2902, TAMPA, FL',4624569986,55,'M');
INSERT INTO PASSENGER2(PASSPORTNO,FNAME,LNAME,HOME_ADDRESS,PHONE,AGE,SEX) VALUES('R8990566','GURPREET','SINGH','3355 PALENCIA, APT 2065, MUMBAI, INDIA',4724512343,10,'M');

CREATE TABLE PASSENGER3
(PID INT NOT NULL,
FLIGHT_CODE VARCHAR(10),
PRIMARY KEY(PID),
FOREIGN KEY(FLIGHT_CODE) REFERENCES FLIGHT(FLIGHT_CODE) ON DELETE CASCADE);

-- INSERTING VALUES INTO TABLE: PASSENGER3--

INSERT INTO PASSENGER3(PID, FLIGHT_CODE) VALUES(1,'AI2014');
INSERT INTO PASSENGER3(PID, FLIGHT_CODE) VALUES(2,'LH9876');
INSERT INTO PASSENGER3(PID, FLIGHT_CODE) VALUES(3,'9W2334');
INSERT INTO PASSENGER3(PID, FLIGHT_CODE) VALUES(4,'QR1902');
INSERT INTO PASSENGER3(PID, FLIGHT_CODE) VALUES(5,'EY1234');
INSERT INTO PASSENGER3(PID, FLIGHT_CODE) VALUES(6,'BA3056');
INSERT INTO PASSENGER3(PID, FLIGHT_CODE) VALUES(7,'9W2334');
INSERT INTO PASSENGER3(PID, FLIGHT_CODE) VALUES(8,'AA4367');
INSERT INTO PASSENGER3(PID, FLIGHT_CODE) VALUES(9,'QR1902');
INSERT INTO PASSENGER3(PID, FLIGHT_CODE) VALUES(10,'EK3456');
INSERT INTO PASSENGER3(PID, FLIGHT_CODE) VALUES(11,'BA1689');
INSERT INTO PASSENGER3(PID, FLIGHT_CODE) VALUES(12,'QR1902');
INSERT INTO PASSENGER3(PID, FLIGHT_CODE) VALUES(13,'AI2014');
INSERT INTO PASSENGER3(PID, FLIGHT_CODE) VALUES(14,'BA1689');
INSERT INTO PASSENGER3(PID, FLIGHT_CODE) VALUES(15,'QR2305');



CREATE TABLE EMPLOYEE1
(SSN INT NOT NULL,
Airport_Name VARCHAR2(100) NOT NULL,
Airport_Code VARCHAR2(15),
PASSPORTNUM VARCHAR(10),
FNAME VARCHAR2(20),
LNAME VARCHAR2(20),
HOME_ADDRESS VARCHAR2(100),
PHONE INT,
AGE INT,
SEX VARCHAR(1),
JOBTYPE VARCHAR2(30),
ASTYPE VARCHAR2(30),
ETYPE VARCHAR2(30),
SHIFT VARCHAR2(20),
POSITION VARCHAR2(30),
PRIMARY KEY(SSN),
FOREIGN KEY(Airport_Name) REFERENCES AIRPORT(Airport_Name) ON DELETE CASCADE,
FOREIGN KEY(Airport_Code) REFERENCES AIRPORT(Airport_Code) ON DELETE CASCADE);

ALTER TABLE TICKET2 DROP PRIMARY KEY;

INSERT INTO EMPLOYEE1(SSN, PASSPORTNUM, FNAME, LNAME, HOME_ADDRESS, PHONE, AGE, SEX, JOBTYPE, ASTYPE, ETYPE, SHIFT, POSITION, Airport_Name,Airport_Code) VALUES(123456789, '7700225V','LINDA','GOODMAN','731 Fondren, Houston, TX',4356789345, 35, 'F','ADMINISTRATIVE SUPPORT','RECEPTIONIST','','','','Louisville International Airport','SDF');
INSERT INTO EMPLOYEE1(SSN, PASSPORTNUM, FNAME, LNAME, HOME_ADDRESS, PHONE, AGE, SEX, JOBTYPE, ASTYPE, ETYPE, SHIFT, POSITION, Airport_Name,Airport_Code) VALUES(333445555, '5452407D','JOHNY','PAUL','638 Voss, Houston, TX',9834561995, 40, 'M','ADMINISTRATIVE SUPPORT','SECRETARY','','','','Louisville International Airport','SDF');
INSERT INTO EMPLOYEE1(SSN, PASSPORTNUM, FNAME, LNAME, HOME_ADDRESS, PHONE, AGE, SEX, JOBTYPE, ASTYPE, ETYPE, SHIFT, POSITION, Airport_Name,Airport_Code) VALUES(999887777, '1241125L', 'JAMES','CHARLES','3321 Castle, Spring, TX',9834666995, 50, 'M','ENGINEER','','RADIO ENGINEER','','','Louisville International Airport','SDF');
INSERT INTO EMPLOYEE1(SSN, PASSPORTNUM, FNAME, LNAME, HOME_ADDRESS, PHONE, AGE, SEX, JOBTYPE, ASTYPE, ETYPE, SHIFT, POSITION, Airport_Name,Airport_Code) VALUES(987654321, '6993459T','SHERLOCK','HOLMES','123 TOP HILL, SAN Francisco,CA',8089654321, 47, 'M','TRAFFIC MONITOR','','','DAY','','San Francisco International Airport','SFO');
INSERT INTO EMPLOYEE1(SSN, PASSPORTNUM, FNAME, LNAME, HOME_ADDRESS, PHONE, AGE, SEX, JOBTYPE, ASTYPE, ETYPE, SHIFT, POSITION, Airport_Name,Airport_Code) VALUES(666884444, '0691084D','SHELDON','COOPER','345 CHERRY PARK, HESSE,GERMANY',1254678903, 55, 'M','TRAFFIC MONITOR','','NIGHT','','','Frankfurt Airport','FRA');
INSERT INTO EMPLOYEE1(SSN, PASSPORTNUM, FNAME, LNAME, HOME_ADDRESS, PHONE, AGE, SEX, JOBTYPE, ASTYPE, ETYPE, SHIFT, POSITION, Airport_Name,Airport_Code) VALUES(453453453, '7141506R','RAJ','SHARMA','345 FLOYDS, MUMBAI,INDIA',4326789031, 35, 'M','AIRPORT AUTHORITY','','','','MANAGER','Chhatrapati Shivaji International Airport','BOM');
INSERT INTO EMPLOYEE1(SSN, PASSPORTNUM, FNAME, LNAME, HOME_ADDRESS, PHONE, AGE, SEX, JOBTYPE, ASTYPE, ETYPE, SHIFT, POSITION, Airport_Name,Airport_Code) VALUES(987987987, '9857460S','NIKITA','RAJPUT','110 SYNERGY PARK, DALLAS,TX',5678904325, 33, 'F','ENGINEER','','AIRPORT CIVIL ENGINEER','','','Dallas/Fort Worth International Airport','DFW');
INSERT INTO EMPLOYEE1(SSN, PASSPORTNUM, FNAME, LNAME, HOME_ADDRESS, PHONE, AGE, SEX, JOBTYPE, ASTYPE, ETYPE, SHIFT, POSITION, Airport_Name,Airport_Code) VALUES(888665555, '4835734Q','SHUBHAM','GUPTA','567 CHANDANI CHOWK, DELHI, INDIA',8566778890, 39, 'M','ADMINISTRATIVE SUPPORT','DATA ENTRY WORKER','','','','Indira Gandhi International Airport','DEL');
INSERT INTO EMPLOYEE1(SSN, PASSPORTNUM, FNAME, LNAME, HOME_ADDRESS, PHONE, AGE, SEX, JOBTYPE, ASTYPE, ETYPE, SHIFT, POSITION, Airport_Name,Airport_Code) VALUES(125478909, '4115381J','PRATIK','KUMAR','334 VITRUVIAN PARK, ALBANY, NY',4444678903, 56, 'M','TRAFFIC MONITOR','','DAY','','','John F. Kennedy International Airport','JFK');
INSERT INTO EMPLOYEE1(SSN, PASSPORTNUM, FNAME, LNAME, HOME_ADDRESS, PHONE, AGE, SEX, JOBTYPE, ASTYPE, ETYPE, SHIFT, POSITION, Airport_Name,Airport_Code) VALUES(324567897, '8268048M','ADIT','DESAI','987 SOMNATH, CHANDIGARH, INDIA',2244658909, 36, 'M','TRAFFIC MONITOR','','DAY','','','Chandigarh International Airport','IXC');


CREATE TABLE EMPLOYEE2
(JOBTYPE VARCHAR2(30) NOT NULL,
SALARY INT,
PRIMARY KEY(JOBTYPE));

--INSERTING VALUES INTO TABLE: EMPLOYEE2--
INSERT INTO EMPLOYEE2(JOBTYPE, SALARY)VALUES('ADMINISTRATIVE SUPPORT',50000);
INSERT INTO EMPLOYEE2(JOBTYPE, SALARY)VALUES('ENGINEER',70000);
INSERT INTO EMPLOYEE2(JOBTYPE, SALARY)VALUES('TRAFFIC MONITOR',80000);
INSERT INTO EMPLOYEE2(JOBTYPE, SALARY)VALUES('AIRPORT AUTHORITY',90000);


CREATE TABLE WORKPLACE
(SSN INT NOT NULL,
FLIGHT_CODE VARCHAR(10) NOT NULL,
Airport_Code VARCHAR(15) NOT NULL,
PRIMARY KEY(SSN, FLIGHT_CODE),
FOREIGN KEY(SSN) REFERENCES EMPLOYEE1(SSN) ON DELETE CASCADE);

-- INSERTING VALUES INTO TABLE: WORKPLACE--
INSERT INTO WORKPLACE(SSN, FLIGHT_CODE, Airport_Code) VALUES(453453453,'AI2014','BOM');
INSERT INTO WORKPLACE(SSN, FLIGHT_CODE, Airport_Code) VALUES(453453453,'QR2305','BOM');
INSERT INTO WORKPLACE(SSN, FLIGHT_CODE, Airport_Code) VALUES(125478909,'EY1234','JFK');
INSERT INTO WORKPLACE(SSN, FLIGHT_CODE, Airport_Code) VALUES(125478909,'LH9876','JFK');
INSERT INTO WORKPLACE(SSN, FLIGHT_CODE, Airport_Code) VALUES(987654321,'AA4367','SFO');
INSERT INTO WORKPLACE(SSN, FLIGHT_CODE, Airport_Code) VALUES(324567897,'QR1902','IXC');
INSERT INTO WORKPLACE(SSN, FLIGHT_CODE, Airport_Code) VALUES(666884444,'BA1689','FRA');
INSERT INTO WORKPLACE(SSN, FLIGHT_CODE, Airport_Code) VALUES(333445555,'JW2334','IAH');
INSERT INTO WORKPLACE(SSN, FLIGHT_CODE, Airport_Code) VALUES(453453453,'EK3456','BOM');
INSERT INTO WORKPLACE(SSN, FLIGHT_CODE, Airport_Code) VALUES(453453453,'BA3056','BOM');

CREATE TABLE TICKET1
(TICKET_NUMBER INT NOT NULL,
SOURCE VARCHAR(3),
DESTINATION VARCHAR(3),
DATE_OF_BOOKING DATE,
DATE_OF_TRAVEL DATE,
SEATNO VARCHAR(5),
CLASS VARCHAR2(15),
DATE_OF_CANCELLATION DATE,
PID INT,
PASSPORTNO VARCHAR(10),
FOREIGN KEY(PID, PASSPORTNO) REFERENCES PASSENGER1(PID, PASSPORTNO) ON DELETE CASCADE);

--INSERTING INTO TABLE: TICKET1--
INSERT INTO TICKET1(TICKET_NUMBER, SOURCE, DESTINATION, DATE_OF_BOOKING, DATE_OF_CANCELLATION, DATE_OF_TRAVEL, SEATNO, CLASS, PID, PASSPORTNO) VALUES(0011234111122,'BOM','DFW','05-11-16','','12-15-16','32A','ECONOMY',1,'A1234568');
INSERT INTO TICKET1(TICKET_NUMBER, SOURCE, DESTINATION, DATE_OF_BOOKING, DATE_OF_CANCELLATION, DATE_OF_TRAVEL, SEATNO, CLASS, PID, PASSPORTNO) VALUES(0984567222299,'JFK','BOM','06-11-16','12-10-16','20-DEC-16','45D','ECONOMY',2,'B9876541');
INSERT INTO TICKET1(TICKET_NUMBER, SOURCE, DESTINATION, DATE_OF_BOOKING, DATE_OF_CANCELLATION, DATE_OF_TRAVEL, SEATNO, CLASS, PID, PASSPORTNO) VALUES(1768901333273,'IAH','DEL','08-21-16','','12-25-16','1A','BUSINESS',3,'C2345698');
INSERT INTO TICKET1(TICKET_NUMBER, SOURCE, DESTINATION, DATE_OF_BOOKING, DATE_OF_CANCELLATION, DATE_OF_TRAVEL, SEATNO, CLASS, PID, PASSPORTNO) VALUES(5890987441464,'IXC','IAH','08-05-16','','01-12-17','20C','FIRST-CLASS',4,'D1002004');
INSERT INTO TICKET1(TICKET_NUMBER, SOURCE, DESTINATION, DATE_OF_BOOKING, DATE_OF_CANCELLATION, DATE_OF_TRAVEL, SEATNO, CLASS, PID, PASSPORTNO) VALUES(1577654664266,'JFK','TPA','06-13-16','','12-10-16','54E','ECONOMY',5,'X9324666');
INSERT INTO TICKET1(TICKET_NUMBER, SOURCE, DESTINATION, DATE_OF_BOOKING, DATE_OF_CANCELLATION, DATE_OF_TRAVEL, SEATNO, CLASS, PID, PASSPORTNO) VALUES(2206543545545,'BOM','DFW','11-11-16','','02-12-17','43B','ECONOMY',6,'B8765430');
INSERT INTO TICKET1(TICKET_NUMBER, SOURCE, DESTINATION, DATE_OF_BOOKING, DATE_OF_CANCELLATION, DATE_OF_TRAVEL, SEATNO, CLASS, PID, PASSPORTNO) VALUES(7064321779737,'IAH','DEL','11-15-16','','12-25-16','27B','FIRST-CLASS',7,'J9801235');
INSERT INTO TICKET1(TICKET_NUMBER, SOURCE, DESTINATION, DATE_OF_BOOKING, DATE_OF_CANCELLATION, DATE_OF_TRAVEL, SEATNO, CLASS, PID, PASSPORTNO) VALUES(1571357215116,'SFO','FRA','10-15-16','','12-18-16','34E','ECONOMY',8,'A1122334');
INSERT INTO TICKET1(TICKET_NUMBER, SOURCE, DESTINATION, DATE_OF_BOOKING, DATE_OF_CANCELLATION, DATE_OF_TRAVEL, SEATNO, CLASS, PID, PASSPORTNO) VALUES(1570864987655,'IXC','IAH','11-12-16','','12-30-16','54C','ECONOMY',9,'Q1243567');
INSERT INTO TICKET1(TICKET_NUMBER, SOURCE, DESTINATION, DATE_OF_BOOKING, DATE_OF_CANCELLATION, DATE_OF_TRAVEL, SEATNO, CLASS, PID, PASSPORTNO) VALUES(1579283997799,'BOM','SFO','01-22-16','','12-15-16','38A','ECONOMY',10,'S1243269');
INSERT INTO TICKET1(TICKET_NUMBER, SOURCE, DESTINATION, DATE_OF_BOOKING, DATE_OF_CANCELLATION, DATE_OF_TRAVEL, SEATNO, CLASS, PID, PASSPORTNO) VALUES(1255701876107,'FRA','DEL','10-19-16','','12-31-16','57F','ECONOMY',11,'E3277889');
INSERT INTO TICKET1(TICKET_NUMBER, SOURCE, DESTINATION, DATE_OF_BOOKING, DATE_OF_CANCELLATION, DATE_OF_TRAVEL, SEATNO, CLASS, PID, PASSPORTNO) VALUES(1251334499699,'IXC','IAH','11-20-16','','01-12-17','45D','ECONOMY',12,'K3212322');
INSERT INTO TICKET1(TICKET_NUMBER, SOURCE, DESTINATION, DATE_OF_BOOKING, DATE_OF_CANCELLATION, DATE_OF_TRAVEL, SEATNO, CLASS, PID, PASSPORTNO) VALUES(1258776199490,'BOM','DFW','05-13-16','05-25-16','12-15-16','37C','ECONOMY',13,'P3452390');
INSERT INTO TICKET1(TICKET_NUMBER, SOURCE, DESTINATION, DATE_OF_BOOKING, DATE_OF_CANCELLATION, DATE_OF_TRAVEL, SEATNO, CLASS, PID, PASSPORTNO) VALUES(5891155114477,'FRA','DEL','06-26-16','','12-23-16','55C','ECONOMY',14,'W7543336');
INSERT INTO TICKET1(TICKET_NUMBER, SOURCE, DESTINATION, DATE_OF_BOOKING, DATE_OF_CANCELLATION, DATE_OF_TRAVEL, SEATNO, CLASS, PID, PASSPORTNO) VALUES(5893069766787,'BOM','DFW','08-11-16','','12-22-16','33F','ECONOMY',15,'R8990566');


CREATE TABLE TICKET2
(DATE_OF_BOOKING DATE NOT NULL,
SOURCE VARCHAR(3) NOT NULL,
DESTINATION VARCHAR(3) NOT NULL,
CLASS VARCHAR2(15) NOT NULL,
PRICE INT,
PRIMARY KEY(DATE_OF_BOOKING, SOURCE, DESTINATION, CLASS),
FOREIGN KEY(City_Name) REFERENCES CITY(City_Name) ON DELETE CASCADE);


ALTER TABLE TICKET2
ADD TICKET_NUMBER INT NOT NULL;

ALTER TABLE TICKET2 DROP PRIMARY KEY;

ALTER TABLE TICKET2 ADD PRIMARY KEY (TICKET_NUMBER);


-- INSERTING VALUES INTO TICKET2--
INSERT INTO TICKET2(DATE_OF_BOOKING, SOURCE, DESTINATION, CLASS, PRICE) VALUES('05-11-16','BOM','DFW','ECONOMY',95000);
INSERT INTO TICKET2(DATE_OF_BOOKING, SOURCE, DESTINATION, CLASS, PRICE) VALUES('06-06-16','JFK','BOM','ECONOMY',10000);
INSERT INTO TICKET2(DATE_OF_BOOKING, SOURCE, DESTINATION, CLASS, PRICE) VALUES('08-21-16','IAH','DEL','BUSINESS',20000);
INSERT INTO TICKET2(DATE_OF_BOOKING, SOURCE, DESTINATION, CLASS, PRICE) VALUES('08-10-16','IXC','IAH','FIRST-CLASS',19000);
INSERT INTO TICKET2(DATE_OF_BOOKING, SOURCE, DESTINATION, CLASS, PRICE) VALUES('06-13-16','JFK','TPA','ECONOMY',9800);
INSERT INTO TICKET2(DATE_OF_BOOKING, SOURCE, DESTINATION, CLASS, PRICE) VALUES('11-11-16','BOM','DFW','ECONOMY',15000);
INSERT INTO TICKET2(DATE_OF_BOOKING, SOURCE, DESTINATION, CLASS, PRICE) VALUES('11-15-16','IAH','DEL','FIRST-CLASS',19500);
INSERT INTO TICKET2(DATE_OF_BOOKING, SOURCE, DESTINATION, CLASS, PRICE) VALUES('10-15-16','SFO','FRA','ECONOMY',170000);
INSERT INTO TICKET2(DATE_OF_BOOKING, SOURCE, DESTINATION, CLASS, PRICE) VALUES('11-12-16','IXC','IAH','ECONOMY',140000);
INSERT INTO TICKET2(DATE_OF_BOOKING, SOURCE, DESTINATION, CLASS, PRICE) VALUES('01-22-16','BOM','SFO','ECONOMY',45000);
INSERT INTO TICKET2(DATE_OF_BOOKING, SOURCE, DESTINATION, CLASS, PRICE) VALUES('10-19-16','FRA','DEL','ECONOMY',100000);
INSERT INTO TICKET2(DATE_OF_BOOKING, SOURCE, DESTINATION, CLASS, PRICE) VALUES('11-20-16','IXC','IAH','ECONOMY',120000);
INSERT INTO TICKET2(DATE_OF_BOOKING, SOURCE, DESTINATION, CLASS, PRICE) VALUES('05-19-16','BOM','DFW','ECONOMY',65000);
INSERT INTO TICKET2(DATE_OF_BOOKING, SOURCE, DESTINATION, CLASS, PRICE) VALUES('06-26-16','FRA','DEL','ECONOMY',80000);
INSERT INTO TICKET2(DATE_OF_BOOKING, SOURCE, DESTINATION, CLASS, PRICE) VALUES('08-11-16','BOM','DFW','ECONOMY',98000);




CREATE TABLE TICKET3
(DATE_OF_CANCELLATION DATE NOT NULL,
SURCHARGE INT,
PRIMARY KEY(DATE_OF_CANCELLATION));

-- INSERTING VALUES INTO TABLE: TICKET3--

INSERT INTO TICKET3(DATE_OF_CANCELLATION, SURCHARGE) VALUES('12-10-16',7500);
INSERT INTO TICKET3(DATE_OF_CANCELLATION, SURCHARGE) VALUES('05-25-16',2500);







































-- Stored Procedure for Details of economy class passengers with destination Â‘DFW'--
CREATE OR REPLACE PROCEDURE DFWECONOMYPASSENGERS AS 
CURSOR ECOPASSDETAILS is
select al.Airline_name,fl.FLIGHT_CODE,p2.FNAME,p2.LNAME,p2.PASSPORTNO,t.CLASS,t.DATE_OF_TRAVEL,t.DESTINATION,t.SOURCE,t.SEATNO,t.TICKET_NUMBER from Airline al,Flight fl,PASSENGER1 p1,PASSENGER2 p2 ,PASSENGER3 p3,TICKET1 t
where al.Airline_id = fl.Airline_id
and  p1.PID= p3.PID
and  p1.PASSPORTNO =p2.PASSPORTNO
and fl.FLIGHT_CODE = p3.FLIGHT_CODE
and t.PASSPORTNO = p2.PASSPORTNO
and t.CLASS='ECONOMY' and t.DESTINATION='DFW';
 
PASSDETAILS ECOPASSDETAILS%rowtype;
 
BEGIN
 
Open ECOPASSDETAILS ;
   LOOP
    fetch ECOPASSDETAILS into PASSDETAILS;
     EXIT WHEN ECOPASSDETAILS%NOTFOUND;
   dbms_output.put_line (PASSDETAILS.Airline_name || '  ' || PASSDETAILS.FLIGHT_CODE || '  ' || PASSDETAILS.FNAME || '  ' || PASSDETAILS.LNAME|| '  ' ||PASSDETAILS.PASSPORTNO || '  ' || PASSDETAILS.CLASS || '  ' || PASSDETAILS.SOURCE || '  ' || PASSDETAILS.SEATNO || '  ' || PASSDETAILS.TICKET_NUMBER);
   
    END LOOP;
     close ECOPASSDETAILS;
 END DFWECONOMYPASSENGERS;
 
 --Testing in sql developer: Oracle db--
 SET SERVEROUTPUT ON
 exec DFWECONOMYPASSENGERS();

-- Stored Procedure for flight details by status --
CREATE OR REPLACE PROCEDURE FLIGHTSBYstat 
(
  IN_stat IN VARCHAR2
) AS 
 
CURSOR fstat is
select  distinct f.FLIGHT_CODE ,al.Airline_name ,f.ARRIVAL,f.departure,f.SOURCE,f.DESTINATION,f.stat,f.FLIGHTTYPE from Airline al ,Airport ap,flight f
where al.Airline_id=f.Airline_id
and  f.stat =IN_stat;
 
Flightstat fstat%rowtype;
  
BEGIN
  Open fstat ;
   LOOP
    fetch fstat into Flightstat;
     EXIT WHEN fstat%NOTFOUND;
   dbms_output.put_line (Flightstat.FLIGHT_CODE || '  ' || Flightstat.Airline_name || '  ' || Flightstat.ARRIVAL || '  ' || Flightstat.departure|| '  ' ||Flightstat.Source || '  ' || Flightstat.DESTINATION || '  ' || Flightstat.stat || '  ' || Flightstat.FLIGHTTYPE);
   
    END LOOP;
     close fstat;
END FLIGHTSBYstat;
 
 --Testing in sql developer: Oracle db--
SET SERVEROUTPUT ON 
exec FLIGHTSBYstat('Delayed');
-- or--
SET SERVEROUTPUT ON 
exec FLIGHTSBYstat('On-time');
 

-- Trigger, when flight is delayed it is logged into different table--

CREATE OR REPLACE TRIGGER DELAYEDFLIGHTS 
AFTER INSERT ON FLIGHT 
FOR EACH ROW 
DECLARE

BEGIN
    if updating('stat')
    then
       insert into delayed_flights (FLIGHT_CODE, SOURCE, DESTINATION , Airline_id ,report_time) values(:new.flight_code,:new.source,:new.destination,:new.Airline_id,sysdate);
end if;
 
END;

-- This is audit table for this trigger--
 CREATE TABLE "DELAYED_FLIGHTS" 
   (           "FLIGHT_CODE" VARCHAR2(20 BYTE), 
                "DESTINATION" VARCHAR2(20 BYTE), 
                "SOURCE" VARCHAR2(20 BYTE), 
                "Airline_id" VARCHAR2(20 BYTE), 
                "REPORT_TIME" DATE
   );
 

INSERT INTO FLIGHT(FLIGHT_CODE, SOURCE, DESTINATION, ARRIVAL, DEPARTURE, stat, DURATION, FLIGHTTYPE, LAYOVER_TIME, NO_OF_STOPS, Airline_id)
VALUES('AI127','BOM','DFW','02:10','03:15','Delayed','24hr','Connecting',3,1,'AI');



--TRIGGER TO UPDATE SALARY OF AN EMPLOYEE DEPENDING ON JOBTYPE--

CREATE OR REPLACE TRIGGER UPDATEDSalary AFTER
  INSERT OR
  UPDATE OF SALARY ON EMPLOYEE2
  FOR EACH ROW;
DECLARE 
JOBTYPE EMPLOYEE2.JOBTYPE%TYPE
BEGIN
  CASE
    WHEN (JOBTYPE= 'Administrative Support') THEN
      UPDATE EMPLOYEE2 SET SALARY=SALARY+SALARY*.10;
    WHEN (JOBTYPE= 'ENGINEER') THEN
      UPDATE EMPLOYEE2 SET SALARY=SALARY+SALARY*.05;
    WHEN (JOBTYPE= 'TRAFFIC MONITOR') THEN
      UPDATE EMPLOYEE2 SET SALARY=SALARY+SALARY*.25;
    WHEN (JOBTYPE= 'AIRPORT AUTHORITY') THEN
      UPDATE EMPLOYEE2 SET SALARY=SALARY+SALARY*.45;
  END CASE; 
END;


-- TRIGGER TO UPDATE 'TICKET_PRICE_HISTORY' TABLE WHEN THE PRICE OF AN AIR TICKET IS UPDATED IN TICKET2 TABLE--

-- CREATING TABLE TICKET_PRICE_HISTORY--

CREATE TABLE TICKET_PRICE_HISTORY
(DATE_OF_BOOKING DATE NOT NULL,
SOURCE VARCHAR(3) NOT NULL,
DESTINATION VARCHAR(3) NOT NULL,
CLASS VARCHAR2(15) NOT NULL,
PRICE INT,
PRIMARY KEY(DATE_OF_BOOKING, SOURCE, DESTINATION, CLASS));

-- CREATE A TRIGGER TICKET_PRICE_HISTORY --

CREATE OR REPLACE TRIGGER TICKET_PRICE_HISTORY
BEFORE UPDATE OF PRICE
ON TICKET2
FOR EACH ROW

BEGIN
INSERT INTO TICKET_PRICE_HISTORY 
VALUES(:OLD.DATE_OF_BOOKING, :OLD.SOURCE, :OLD:DESTINATION, :OLD.CLASS, :OLD.PRICE);

END;

--LET'S UPDATE A PRICE OR FARE OF AN AIR TICKET --

UPDATE TICKET2
SET PRICE=150000
WHERE DATE_OF_BOOKING ='11-NOV-16'
AND SOURCE='BOM'
AND DESTINATION='DFW'
AND CLASS='ECONOMY'
