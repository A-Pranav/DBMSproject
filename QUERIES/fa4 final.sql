CREATE table "CITY" (
    "CITY_CODE"  VARCHAR2(9) NOT NULL,
    "CITY_NAME"  VARCHAR2(20),
    "STATE"      VARCHAR2(25),
    "COUNTRY"    VARCHAR2(30),
    constraint  "CITY_PK" primary key ("CITY_CODE")
)

CREATE table "AIRPORT" (
    "AIRPORT_CODE" VARCHAR2(9) NOT NULL,
    "CITY_CODE"    VARCHAR2(9) NOT NULL,
    "AIRPORT_NAME" VARCHAR2(50),
    constraint  "AIRPORT_PK" primary key ("AIRPORT_CODE")
);

ALTER TABLE "AIRPORT" ADD CONSTRAINT "AIRPORT_FK" 
FOREIGN KEY ("CITY_CODE")
REFERENCES "CITY" ("CITY_CODE")
ON DELETE CASCADE;

CREATE table "AIRLINE" (
    "AIRLINE_ID"   VARCHAR2(3) NOT NULL,
    "AIRLINE_CODE" VARCHAR2(3) NOT NULL,
    "AIRLINE_NAME" VARCHAR2(50),
    constraint  "AIRLINE_PK" primary key ("AIRLINE_CODE")
)
/

CREATE table "DOCKED_AIRLINE" (
    "AIRLINE_CODE" VARCHAR2(3) NOT NULL,
    "AIRPORT_CODE" VARCHAR2(9) NOT NULL,
    constraint  "DOCKED_AIRLINE_PK" primary key ("AIRLINE_CODE")
)
/
ALTER TABLE "DOCKED_AIRLINE" ADD CONSTRAINT "DOCKED_AIRLINE_FK_APC" 
FOREIGN KEY ("AIRPORT_CODE")
REFERENCES "AIRPORT" ("AIRPORT_CODE")
ON DELETE CASCADE
/
ALTER TABLE "DOCKED_AIRLINE" ADD CONSTRAINT "DOCKED_AIRLINE_FK_ALC" 
FOREIGN KEY ("AIRLINE_CODE")
REFERENCES "AIRLINE" ("AIRLINE_CODE")
ON DELETE CASCADE
/


CREATE table "FLIGHT_DATA" (
    "FLIGHT_CODE"  VARCHAR2(10) NOT NULL,
    "SOURCE"       VARCHAR2(9) NOT NULL,
    "DESTINATION"  VARCHAR2(9) NOT NULL,
    "DURATION"     VARCHAR2(5),
    "ARRIVAL"      VARCHAR2(10),
    "DEPARTURE"    VARCHAR2(10),
    "LAYOVER_TIME" VARCHAR2(10),
    "NUM_STOPS"    VARCHAR2(10),
    "AIRLINE_CODE" VARCHAR2(3) NOT NULL,
    constraint  "FLIGHT_DATA_PK" primary key ("FLIGHT_CODE")
)
/
ALTER TABLE "FLIGHT_DATA" ADD CONSTRAINT "FLIGHT_DATA_FK" 
FOREIGN KEY ("AIRLINE_CODE")
REFERENCES "AIRLINE" ("AIRLINE_CODE")
ON DELETE CASCADE
/


CREATE table "CABIN_DATA" (
    "FLIGHT_CODE"          VARCHAR2(10) NOT NULL,
    "TOTAL_SEATS"          NUMBER(3), 
	"AVAIL_SEATS"          NUMBER(3), 
    "TOTAL_ECONOMY_CLASS"  NUMBER(3),
    "AVAIL_ECONOMY_CLASS"  NUMBER(3),
    "TOTAL_BUSINESS_CLASS" NUMBER(3),
    "AVAIL_BUSINESS_CLASS" NUMBER(3),
    "TOTAL_FIRST_CLASS"    NUMBER(3),
    "AVAIL_FIRST_CLASS"    NUMBER(3),
    constraint  "CABIN_DATA_PK" primary key ("FLIGHT_CODE")
)
/

ALTER TABLE "CABIN_DATA" ADD CONSTRAINT "CABIN_DATA_FK" 
FOREIGN KEY ("FLIGHT_CODE")
REFERENCES "FLIGHT_DATA" ("FLIGHT_CODE")
ON DELETE CASCADE

/

CREATE table "PASSENGER_DATA" (
    "PASSENGER_ID"    NUMBER(3) NOT NULL,
    "PASSPORT_NUMBER" VARCHAR2(10) NOT NULL,
    "FLIGHT_CODE"     VARCHAR2(10) NOT NULL,
    constraint  "PASSENGER_DATA_PK" primary key ("PASSENGER_ID")
)
/
ALTER TABLE "PASSENGER_DATA" ADD CONSTRAINT "PASSENGER_DATA_FK" 
FOREIGN KEY ("FLIGHT_CODE")
REFERENCES "FLIGHT_DATA" ("FLIGHT_CODE")
ON DELETE CASCADE
/

CREATE table "PASSENGER_DETAILS" (
    "PASSENGER_ID"      NUMBER(3) NOT NULL,
    "FNAME"             VARCHAR2(20),
    "LNAME"             VARCHAR2(20),
    "HOME_ADDRESS"      VARCHAR2(100),
    "PHONE_NUMBER"      NUMBER(10),
    "GENDER"            VARCHAR2(1),
    "FREQF_DISCOUNT"    VARCHAR2(1),
    "EMPLOYEE_DISCOUNT" VARCHAR2(1),
    "EMPLOYEE_ID"       NUMBER(10),
    constraint  "PASSENGER_DETAILS_PK" primary key ("PASSENGER_ID")
)
/
ALTER TABLE "PASSENGER_DETAILS" ADD CONSTRAINT "PASSENGER_DETAILS_FK" 
FOREIGN KEY ("PASSENGER_ID")
REFERENCES "PASSENGER_DATA" ("PASSENGER_ID")
ON DELETE CASCADE
/

CREATE table "TICKET" (
    "TICKET_NUMBER" NUMBER(10) NOT NULL,
    "FLIGHT_CODE"   VARCHAR2(10) NOT NULL,
    "PASSENGER_ID"  NUMBER(3) NOT NULL,
    "SEAT_NUM"      VARCHAR2(4),
    constraint  "TICKET_PK" primary key ("TICKET_NUMBER")
)
/
ALTER TABLE TICKET
ADD CONSTRAINT uq_seat UNIQUE (SEAT_NUM);
/
ALTER TABLE "TICKET" ADD CONSTRAINT "TICKET_FK_FD" 
FOREIGN KEY ("FLIGHT_CODE")
REFERENCES "FLIGHT_DATA" ("FLIGHT_CODE")
ON DELETE CASCADE

/
ALTER TABLE "TICKET" ADD CONSTRAINT "TICKET_FK_PI" 
FOREIGN KEY ("PASSENGER_ID")
REFERENCES "PASSENGER_DATA" ("PASSENGER_ID")
ON DELETE CASCADE

/

CREATE table "TICKET_DATA" (
    "TICKET_NUMBER" NUMBER(10) NOT NULL,
    "BOOKING_DATE"  VARCHAR2(15),
    "TRAVEL_DATE"   VARCHAR2(15),
    "CANCEL_DATE"   VARCHAR2(15),
    "CLASS"         VARCHAR2(15),
    "PRICE"         NUMBER(10),
    constraint  "TICKET_DATA_PK" primary key ("TICKET_NUMBER")
)
/

ALTER TABLE "TICKET_DATA" ADD CONSTRAINT "TICKET_DATA_FK_TN" 
FOREIGN KEY ("TICKET_NUMBER")
REFERENCES "TICKET" ("TICKET_NUMBER")
ON DELETE CASCADE

/

CREATE table "CANCEL_BOOKING" (
    "TICKET_NUMBER" NUMBER(10) NOT NULL,
    "PASSENGER_ID"  NUMBER(3) NOT NULL,
    "CANCEL_DATE"   VARCHAR2(15),
    "CHARGES"       NUMBER(10),
    constraint  "CANCEL_BOOKING_PK" primary key ("TICKET_NUMBER")
)
/

ALTER TABLE "CANCEL_BOOKING" ADD CONSTRAINT "CANCEL_BOOKING_FK_TN" 
FOREIGN KEY ("TICKET_NUMBER")
REFERENCES "TICKET" ("TICKET_NUMBER")
ON DELETE CASCADE

/
ALTER TABLE "CANCEL_BOOKING" ADD CONSTRAINT "CANCEL_BOOKING_FK_PI" 
FOREIGN KEY ("PASSENGER_ID")
REFERENCES "PASSENGER_DATA" ("PASSENGER_ID")
ON DELETE CASCADE

/

CREATE table "EMPLOYEE" (
    "EMPLOYEE_ID"  NUMBER(5) NOT NULL,
    "AIRPORT_CODE" VARCHAR2(9) NOT NULL,
    constraint  "EMPLOYEE_PK" primary key ("EMPLOYEE_ID")
)
/
ALTER TABLE "EMPLOYEE" ADD CONSTRAINT "EMPLOYEE_FK" 
FOREIGN KEY ("AIRPORT_CODE")
REFERENCES "AIRPORT" ("AIRPORT_CODE")
ON DELETE CASCADE
/


CREATE table "EMPLOYEE_DETAIL" (
    "EMPLOYEE_ID"   NUMBER(5) NOT NULL,
    "DEPARTMENT_ID" NUMBER(5) NOT NULL,
    "FNAME"         VARCHAR2(20),
    "LNAME"         VARCHAR2(20),
    "PHONE_NUMBER"  NUMBER(10),
    "AGE"           NUMBER(3),
    "GENDER"        VARCHAR2(1),
    "HOME_ADDRESS"  VARCHAR2(100),
    constraint  "EMPLOYEE_DETAIL_PK" primary key ("EMPLOYEE_ID")
)
/
ALTER TABLE "EMPLOYEE_DETAIL" ADD CONSTRAINT "EMPLOYEE_DETAIL_FK" 
FOREIGN KEY ("EMPLOYEE_ID")
REFERENCES "EMPLOYEE" ("EMPLOYEE_ID")
ON DELETE CASCADE
/
CREATE table "DEPARTMENT_DETAILS" (
    "DEPARTMENT_ID"   NUMBER(5) NOT NULL,
    "DEPARTMENT_NAME" VARCHAR2(15),
    "SALARY"          NUMBER(10),
    "JOB_TYPE"        VARCHAR2(15),
    "DATE_APPOINTING" VARCHAR2(15),
    "AIRPORT_CODE"    VARCHAR2(9),
    constraint  "DEPARTMENT_DETAILS_PK" primary key ("DEPARTMENT_ID")
)
/

ALTER TABLE "DEPARTMENT_DETAILS" ADD CONSTRAINT "DEPARTMENT_DETAILS_FK" 
FOREIGN KEY ("AIRPORT_CODE")
REFERENCES "AIRPORT" ("AIRPORT_CODE")
ON DELETE CASCADE

/
ALTER TABLE "EMPLOYEE_DETAIL" ADD CONSTRAINT "EMPLOYEE_DETAIL_FK_DI" 
FOREIGN KEY ("DEPARTMENT_ID")
REFERENCES "DEPARTMENT_DETAILS" ("DEPARTMENT_ID")
ON DELETE CASCADE
/

INSERT INTO CITY ("CITY_CODE","CITY_NAME","STATE","COUNTRY") VALUES('LKUS','Louisville','Kentucky','United States');
INSERT INTO CITY ("CITY_CODE","CITY_NAME","STATE","COUNTRY") VALUES('CCI','Chandigarh','Chandigarh','India');
INSERT INTO CITY ("CITY_CODE","CITY_NAME","STATE","COUNTRY") VALUES('FWTUS','Fort Worth','Texas','United States');
INSERT INTO CITY ("CITY_CODE","CITY_NAME","STATE","COUNTRY") VALUES('DDI','Delhi','Delhi','India');
INSERT INTO CITY ("CITY_CODE","CITY_NAME","STATE","COUNTRY") VALUES('MMMI','Mumbai','Maharashtra','India');
INSERT INTO CITY ("CITY_CODE","CITY_NAME","STATE","COUNTRY") VALUES('SFCUS','San Francisco', 'California', 'United States');
INSERT INTO CITY ("CITY_CODE","CITY_NAME","STATE","COUNTRY") VALUES('FHG','Frankfurt','Hesse','Germany');
INSERT INTO CITY ("CITY_CODE","CITY_NAME","STATE","COUNTRY") VALUES('HTUS','Houston','Texas','United States');
INSERT INTO CITY ("CITY_CODE","CITY_NAME","STATE","COUNTRY") VALUES('NYCUS','New York City','New York','United States');
INSERT INTO CITY ("CITY_CODE","CITY_NAME","STATE","COUNTRY") VALUES('TFUS','Tampa', 'Florida', 'United States');
INSERT INTO CITY ("CITY_CODE","CITY_NAME","STATE","COUNTRY") VALUES('CTNI','Chennai', 'Tamil Nadu', 'India');

INSERT INTO AIRPORT ("AIRPORT_NAME","AIRPORT_CODE","CITY_CODE") VALUES('Louisville International Airport','SDF','LKUS');
INSERT INTO AIRPORT ("AIRPORT_NAME","AIRPORT_CODE","CITY_CODE") VALUES('Chandigarh International Airport','IXC','CCI');
INSERT INTO AIRPORT ("AIRPORT_NAME","AIRPORT_CODE","CITY_CODE") VALUES('Dallas/Fort Worth International Airport','DFW','FWTUS');
INSERT INTO AIRPORT ("AIRPORT_NAME","AIRPORT_CODE","CITY_CODE") VALUES('Indira Gandhi International Airport','DEL','DDI');
INSERT INTO AIRPORT ("AIRPORT_NAME","AIRPORT_CODE","CITY_CODE") VALUES('Chhatrapati Shivaji International Airport','BOM','MMMI');
INSERT INTO AIRPORT ("AIRPORT_NAME","AIRPORT_CODE","CITY_CODE") VALUES('San Francisco International Airport','SFO','SFCUS');
INSERT INTO AIRPORT ("AIRPORT_NAME","AIRPORT_CODE","CITY_CODE") VALUES('Frankfurt Airport','FRA','FHG');
INSERT INTO AIRPORT ("AIRPORT_NAME","AIRPORT_CODE","CITY_CODE") VALUES('George Bush Intercontinental Airport','IAH','HTUS');
INSERT INTO AIRPORT ("AIRPORT_NAME","AIRPORT_CODE","CITY_CODE") VALUES('John F. Kennedy International Airport','JFK','NYCUS');
INSERT INTO AIRPORT ("AIRPORT_NAME","AIRPORT_CODE","CITY_CODE") VALUES('Tampa International Airport','TPA','TFUS');
INSERT INTO AIRPORT ("AIRPORT_NAME","AIRPORT_CODE","CITY_CODE") VALUES('Chennai International Airport','MAA','CTNI');

INSERT INTO AIRLINE ("AIRLINE_ID","AIRLINE_NAME","AIRLINE_CODE") VALUES('AA','American Airlines','001');
INSERT INTO AIRLINE ("AIRLINE_ID","AIRLINE_NAME","AIRLINE_CODE") VALUES('AI','Air India Limited','098');
INSERT INTO AIRLINE ("AIRLINE_ID","AIRLINE_NAME","AIRLINE_CODE") VALUES('LH','Lufthansa', '220');
INSERT INTO AIRLINE ("AIRLINE_ID","AIRLINE_NAME","AIRLINE_CODE") VALUES('BA','British Airways','125');
INSERT INTO AIRLINE ("AIRLINE_ID","AIRLINE_NAME","AIRLINE_CODE") VALUES('QR','Qatar Airways','157');
INSERT INTO AIRLINE ("AIRLINE_ID","AIRLINE_NAME","AIRLINE_CODE") VALUES('JW','Jet Airways','589');
INSERT INTO AIRLINE ("AIRLINE_ID","AIRLINE_NAME","AIRLINE_CODE") VALUES('EK','Emirates','176');
INSERT INTO AIRLINE ("AIRLINE_ID","AIRLINE_NAME","AIRLINE_CODE") VALUES('EY','Ethiad Airways','607');

INSERT INTO DOCKED_AIRLINE ("AIRLINE_CODE","AIRPORT_CODE") VALUES('001','SDF');
INSERT INTO DOCKED_AIRLINE ("AIRLINE_CODE","AIRPORT_CODE") VALUES('001','JFK');
INSERT INTO DOCKED_AIRLINE ("AIRLINE_CODE","AIRPORT_CODE") VALUES('001','IAH');
INSERT INTO DOCKED_AIRLINE ("AIRLINE_CODE","AIRPORT_CODE") VALUES('001','SFO');
INSERT INTO DOCKED_AIRLINE ("AIRLINE_CODE","AIRPORT_CODE") VALUES('001','TPA');
INSERT INTO DOCKED_AIRLINE ("AIRLINE_CODE","AIRPORT_CODE") VALUES('098','IXC');
INSERT INTO DOCKED_AIRLINE ("AIRLINE_CODE","AIRPORT_CODE") VALUES('098','DFW');
INSERT INTO DOCKED_AIRLINE ("AIRLINE_CODE","AIRPORT_CODE") VALUES('098','DEL');
INSERT INTO DOCKED_AIRLINE ("AIRLINE_CODE","AIRPORT_CODE") VALUES('098','BOM');
INSERT INTO DOCKED_AIRLINE ("AIRLINE_CODE","AIRPORT_CODE") VALUES('098','IAH');
INSERT INTO DOCKED_AIRLINE ("AIRLINE_CODE","AIRPORT_CODE") VALUES('220','BOM');
INSERT INTO DOCKED_AIRLINE ("AIRLINE_CODE","AIRPORT_CODE") VALUES('220','FRA');
INSERT INTO DOCKED_AIRLINE ("AIRLINE_CODE","AIRPORT_CODE") VALUES('220','JFK');
INSERT INTO DOCKED_AIRLINE ("AIRLINE_CODE","AIRPORT_CODE") VALUES('220','SFO');
INSERT INTO DOCKED_AIRLINE ("AIRLINE_CODE","AIRPORT_CODE") VALUES('220','DFW');
INSERT INTO DOCKED_AIRLINE ("AIRLINE_CODE","AIRPORT_CODE") VALUES('125','JFK');
INSERT INTO DOCKED_AIRLINE ("AIRLINE_CODE","AIRPORT_CODE") VALUES('125','BOM');
INSERT INTO DOCKED_AIRLINE ("AIRLINE_CODE","AIRPORT_CODE") VALUES('125','IXC');
INSERT INTO DOCKED_AIRLINE ("AIRLINE_CODE","AIRPORT_CODE") VALUES('125','FRA');
INSERT INTO DOCKED_AIRLINE ("AIRLINE_CODE","AIRPORT_CODE") VALUES('125','SFO');
INSERT INTO DOCKED_AIRLINE ("AIRLINE_CODE","AIRPORT_CODE") VALUES('157','BOM');
INSERT INTO DOCKED_AIRLINE ("AIRLINE_CODE","AIRPORT_CODE") VALUES('157','DFW');
INSERT INTO DOCKED_AIRLINE ("AIRLINE_CODE","AIRPORT_CODE") VALUES('157','JFK');
INSERT INTO DOCKED_AIRLINE ("AIRLINE_CODE","AIRPORT_CODE") VALUES('157','TPA');
INSERT INTO DOCKED_AIRLINE ("AIRLINE_CODE","AIRPORT_CODE") VALUES('157','SDF');

INSERT INTO FLIGHT_DATA("FLIGHT_CODE","SOURCE","DESTINATION","DURATION","ARRIVAL","DEPARTURE","LAYOVER_TIME","NUM_STOPS","AIRLINE_CODE") VALUES('AI2014','BOM','DFW','24hr','02:10','03:15' ,'3', '1','098');
INSERT INTO FLIGHT_DATA("FLIGHT_CODE","SOURCE","DESTINATION","DURATION","ARRIVAL","DEPARTURE","LAYOVER_TIME","NUM_STOPS","AIRLINE_CODE") VALUES('QR2305','BOM','DFW','21hr','13:00','13:55' ,'0', '0','157');
INSERT INTO FLIGHT_DATA("FLIGHT_CODE","SOURCE","DESTINATION","DURATION","ARRIVAL","DEPARTURE","LAYOVER_TIME","NUM_STOPS","AIRLINE_CODE") VALUES('EY1234','JFK','TPA','3hrs','19:20','20:05' ,'5', '2','607');
INSERT INTO FLIGHT_DATA("FLIGHT_CODE","SOURCE","DESTINATION","DURATION","ARRIVAL","DEPARTURE","LAYOVER_TIME","NUM_STOPS","AIRLINE_CODE") VALUES('LH9876','JFK','BOM','18hrs','05:50','06:35','0', '0','220');
INSERT INTO FLIGHT_DATA("FLIGHT_CODE","SOURCE","DESTINATION","DURATION","ARRIVAL","DEPARTURE","LAYOVER_TIME","NUM_STOPS","AIRLINE_CODE") VALUES('BA1689','FRA','DEL','7hrs','10:20','10:55' ,'0', '0','125');
INSERT INTO FLIGHT_DATA("FLIGHT_CODE","SOURCE","DESTINATION","DURATION","ARRIVAL","DEPARTURE","LAYOVER_TIME","NUM_STOPS","AIRLINE_CODE") VALUES('AA4367','SFO','FRA','11hrs','18:10','18:55','0', '0','001');
INSERT INTO FLIGHT_DATA("FLIGHT_CODE","SOURCE","DESTINATION","DURATION","ARRIVAL","DEPARTURE","LAYOVER_TIME","NUM_STOPS","AIRLINE_CODE") VALUES('QR1902','IXC','IAH','28hrs','22:00','22:50','5', '1','157');
INSERT INTO FLIGHT_DATA("FLIGHT_CODE","SOURCE","DESTINATION","DURATION","ARRIVAL","DEPARTURE","LAYOVER_TIME","NUM_STOPS","AIRLINE_CODE") VALUES('BA3056','BOM','DFW','29hrs','02:15','02:55','4', '1','125');
INSERT INTO FLIGHT_DATA("FLIGHT_CODE","SOURCE","DESTINATION","DURATION","ARRIVAL","DEPARTURE","LAYOVER_TIME","NUM_STOPS","AIRLINE_CODE") VALUES('EK3456','BOM','SFO','23hrs','18:50','19:40','0', '0','176');
INSERT INTO FLIGHT_DATA("FLIGHT_CODE","SOURCE","DESTINATION","DURATION","ARRIVAL","DEPARTURE","LAYOVER_TIME","NUM_STOPS","AIRLINE_CODE") VALUES('JW2334','IAH','DEL','18hrs','23:00','13:45','0', '0','589');

INSERT INTO CABIN_DATA("FLIGHT_CODE","TOTAL_SEATS","AVAIL_SEATS","TOTAL_ECONOMY_CLASS","AVAIL_ECONOMY_CLASS","TOTAL_BUSINESS_CLASS","AVAIL_BUSINESS_CLASS","TOTAL_FIRST_CLASS","AVAIL_FIRST_CLASS") VALUES('JW2334','140','43','70','14','55','24','15','5');
INSERT INTO CABIN_DATA("FLIGHT_CODE","TOTAL_SEATS","AVAIL_SEATS","TOTAL_ECONOMY_CLASS","AVAIL_ECONOMY_CLASS","TOTAL_BUSINESS_CLASS","AVAIL_BUSINESS_CLASS","TOTAL_FIRST_CLASS","AVAIL_FIRST_CLASS") VALUES('EK3456','147','40','65','10','65','20','17','10');
INSERT INTO CABIN_DATA("FLIGHT_CODE","TOTAL_SEATS","AVAIL_SEATS","TOTAL_ECONOMY_CLASS","AVAIL_ECONOMY_CLASS","TOTAL_BUSINESS_CLASS","AVAIL_BUSINESS_CLASS","TOTAL_FIRST_CLASS","AVAIL_FIRST_CLASS") VALUES('BA3056','145','41','80','10','50','25','15','6');
INSERT INTO CABIN_DATA("FLIGHT_CODE","TOTAL_SEATS","AVAIL_SEATS","TOTAL_ECONOMY_CLASS","AVAIL_ECONOMY_CLASS","TOTAL_BUSINESS_CLASS","AVAIL_BUSINESS_CLASS","TOTAL_FIRST_CLASS","AVAIL_FIRST_CLASS") VALUES('QR1902','153','55','70','17','70','29','13','9');
INSERT INTO CABIN_DATA("FLIGHT_CODE","TOTAL_SEATS","AVAIL_SEATS","TOTAL_ECONOMY_CLASS","AVAIL_ECONOMY_CLASS","TOTAL_BUSINESS_CLASS","AVAIL_BUSINESS_CLASS","TOTAL_FIRST_CLASS","AVAIL_FIRST_CLASS") VALUES('AA4367','186','36','90','10','80','17','16','9');
INSERT INTO CABIN_DATA("FLIGHT_CODE","TOTAL_SEATS","AVAIL_SEATS","TOTAL_ECONOMY_CLASS","AVAIL_ECONOMY_CLASS","TOTAL_BUSINESS_CLASS","AVAIL_BUSINESS_CLASS","TOTAL_FIRST_CLASS","AVAIL_FIRST_CLASS") VALUES('BA1689','250','119','80','10','70','19','17','7');
INSERT INTO CABIN_DATA("FLIGHT_CODE","TOTAL_SEATS","AVAIL_SEATS","TOTAL_ECONOMY_CLASS","AVAIL_ECONOMY_CLASS","TOTAL_BUSINESS_CLASS","AVAIL_BUSINESS_CLASS","TOTAL_FIRST_CLASS","AVAIL_FIRST_CLASS") VALUES('LH9876','164','37','70','10','75','16','19','11');
INSERT INTO CABIN_DATA("FLIGHT_CODE","TOTAL_SEATS","AVAIL_SEATS","TOTAL_ECONOMY_CLASS","AVAIL_ECONOMY_CLASS","TOTAL_BUSINESS_CLASS","AVAIL_BUSINESS_CLASS","TOTAL_FIRST_CLASS","AVAIL_FIRST_CLASS") VALUES('EY1234','166','30','85','10','65','17','16','3');
INSERT INTO CABIN_DATA("FLIGHT_CODE","TOTAL_SEATS","AVAIL_SEATS","TOTAL_ECONOMY_CLASS","AVAIL_ECONOMY_CLASS","TOTAL_BUSINESS_CLASS","AVAIL_BUSINESS_CLASS","TOTAL_FIRST_CLASS","AVAIL_FIRST_CLASS") VALUES('QR2305','164','33','80','10','70','18','14','5');
INSERT INTO CABIN_DATA("FLIGHT_CODE","TOTAL_SEATS","AVAIL_SEATS","TOTAL_ECONOMY_CLASS","AVAIL_ECONOMY_CLASS","TOTAL_BUSINESS_CLASS","AVAIL_BUSINESS_CLASS","TOTAL_FIRST_CLASS","AVAIL_FIRST_CLASS") VALUES('AI2014','168','32','75','10','80','14','13','8');

INSERT INTO DEPARTMENT_DETAILS("DEPARTMENT_ID","DEPARTMENT_NAME","SALARY","JOB_TYPE","AIRPORT_CODE") VALUES(102,'ADMINISTRATION',50000,'','SDF');
INSERT INTO DEPARTMENT_DETAILS("DEPARTMENT_ID","DEPARTMENT_NAME","SALARY","JOB_TYPE","AIRPORT_CODE") VALUES(103,'ATC',65000,'','SDF');
INSERT INTO DEPARTMENT_DETAILS("DEPARTMENT_ID","DEPARTMENT_NAME","SALARY","JOB_TYPE","AIRPORT_CODE") VALUES(104,'communications',45000,'','SDF');
INSERT INTO DEPARTMENT_DETAILS("DEPARTMENT_ID","DEPARTMENT_NAME","SALARY","JOB_TYPE","AIRPORT_CODE") VALUES(105,'Medical Center',40000,'','SDF');
INSERT INTO DEPARTMENT_DETAILS("DEPARTMENT_ID","DEPARTMENT_NAME","SALARY","JOB_TYPE","AIRPORT_CODE") VALUES(106,'Flight Safety',55000,'','SDF');
INSERT INTO DEPARTMENT_DETAILS("DEPARTMENT_ID","DEPARTMENT_NAME","SALARY","JOB_TYPE","AIRPORT_CODE") VALUES(107,'Security',75000,'','SDF');
INSERT INTO DEPARTMENT_DETAILS("DEPARTMENT_ID","DEPARTMENT_NAME","SALARY","JOB_TYPE","AIRPORT_CODE") VALUES(108,'ADMINISTRATION',50000,'','IXC');
INSERT INTO DEPARTMENT_DETAILS("DEPARTMENT_ID","DEPARTMENT_NAME","SALARY","JOB_TYPE","AIRPORT_CODE") VALUES(109,'ATC',65000,'','IXC');
INSERT INTO DEPARTMENT_DETAILS("DEPARTMENT_ID","DEPARTMENT_NAME","SALARY","JOB_TYPE","AIRPORT_CODE") VALUES(110,'communications',45000,'','IXC');
INSERT INTO DEPARTMENT_DETAILS("DEPARTMENT_ID","DEPARTMENT_NAME","SALARY","JOB_TYPE","AIRPORT_CODE") VALUES(111,'Medical Center',40000,'','IXC');
INSERT INTO DEPARTMENT_DETAILS("DEPARTMENT_ID","DEPARTMENT_NAME","SALARY","JOB_TYPE","AIRPORT_CODE") VALUES(112,'Flight Safety',55000,'','IXC');
INSERT INTO DEPARTMENT_DETAILS("DEPARTMENT_ID","DEPARTMENT_NAME","SALARY","JOB_TYPE","AIRPORT_CODE") VALUES(113,'Security',75000,'','IXC');
INSERT INTO DEPARTMENT_DETAILS("DEPARTMENT_ID","DEPARTMENT_NAME","SALARY","JOB_TYPE","AIRPORT_CODE") VALUES(114,'ADMINISTRATION',50000,'','DFW');
INSERT INTO DEPARTMENT_DETAILS("DEPARTMENT_ID","DEPARTMENT_NAME","SALARY","JOB_TYPE","AIRPORT_CODE") VALUES(115,'ATC',65000,'','DFW');
INSERT INTO DEPARTMENT_DETAILS("DEPARTMENT_ID","DEPARTMENT_NAME","SALARY","JOB_TYPE","AIRPORT_CODE") VALUES(116,'communications',45000,'','DFW');
INSERT INTO DEPARTMENT_DETAILS("DEPARTMENT_ID","DEPARTMENT_NAME","SALARY","JOB_TYPE","AIRPORT_CODE") VALUES(117,'Medical Center',40000,'','DFW');
INSERT INTO DEPARTMENT_DETAILS("DEPARTMENT_ID","DEPARTMENT_NAME","SALARY","JOB_TYPE","AIRPORT_CODE") VALUES(118,'Flight Safety',55000,'','DFW');
INSERT INTO DEPARTMENT_DETAILS("DEPARTMENT_ID","DEPARTMENT_NAME","SALARY","JOB_TYPE","AIRPORT_CODE") VALUES(119,'Security',75000,'','DFW');

create sequence "EMPLOYEE_ID_SEQ"
start with 0
increment by 1
maxvalue 99999
minvalue 00000
nocache
nocycle
noorder
/   

create sequence "TICKET_NUMBER_SEQ"
start with 123
increment by 1
maxvalue 99999
minvalue 000000000
nocache
nocycle
noorder
/   

CREATE SEQUENCE "PASSENGER_ID_SEQ"
START WITH 1
MINVALUE 1 
MAXVALUE 999 
INCREMENT BY 1 
NOCACHE
ORDER
NOCYCLE
/

create or replace procedure "NEW_PASSENGER_PRO"
(passport_number IN VARCHAR2,
flight_code IN VARCHAR2,
firstname IN VARCHAR2,
lastname IN VARCHAR2,
homeaddress IN VARCHAR2,
phonenumber IN NUMBER,
p_gender IN VARCHAR2,
p_freqfdiscount IN VARCHAR2,
p_employeediscount IN VARCHAR2,
p_employeeid IN VARCHAR2,
p_class IN VARCHAR2,
p_seat IN VARCHAR2,
p_price IN NUMBER)
is
BEGIN
INSERT INTO PASSENGER_DATA ("PASSENGER_ID","PASSPORT_NUMBER","FLIGHT_CODE") VALUES 
(PASSENGER_ID_SEQ.nextval, passport_number,flight_code);
COMMIT;
INSERT INTO PASSENGER_DETAILS ("PASSENGER_ID","FNAME","LNAME","HOME_ADDRESS",
 "PHONE_NUMBER","GENDER","FREQF_DISCOUNT","EMPLOYEE_DISCOUNT","EMPLOYEE_ID") VALUES 
(PASSENGER_ID_SEQ.currval, firstname, lastname, homeaddress, phonenumber, 
 p_gender,p_freqfdiscount,p_employeediscount,p_employeeid);
COMMIT;
INSERT INTO TICKET ("TICKET_NUMBER", "FLIGHT_CODE", "PASSENGER_ID", "SEAT_NUM") VALUES 
(TICKET_NUMBER_SEQ.nextval, flight_code, PASSENGER_ID_SEQ.currval, p_seat);
COMMIT;
INSERT INTO TICKET_DATA ("TICKET_NUMBER","BOOKING_DATE","TRAVEL_DATE","CANCEL_DATE","CLASS","PRICE") VALUES 
(TICKET_NUMBER_SEQ.currval, sysdate, sysdate+7, '', p_class, p_price);
COMMIT;
END;
/

create or replace procedure "NEW_EMPLOYEE_PRO"
(airport_code IN VARCHAR2,
department_id IN NUMBER,
p_fname IN VARCHAR2,
p_lname IN VARCHAR2,
p_phone_num IN NUMBER,
p_age IN NUMBER,
p_gender IN VARCHAR2,
p_home_address IN VARCHAR2)
is
BEGIN
    INSERT INTO EMPLOYEE ("EMPLOYEE_ID","AIRPORT_CODE") VALUES 
    (EMPLOYEE_ID_SEQ.nextval, airport_code);
    COMMIT;
    
    INSERT INTO EMPLOYEE_DETAILS ("EMPLOYEE_ID","DEPARTMENT_ID","FNAME",
        "LNAME","PHONE_NUMBER","AGE","GENDER","HOME_ADDRESS")
    VALUES 
    (EMPLOYEE_ID_SEQ.currval, department_id,p_fname,p_lname,p_phone_num,p_age,p_gender,p_home_address);
    COMMIT;
END;
/;

BEGIN
   NEW_EMPLOYEE_PRO('SDF','118','Pratham','arora',5345679512,27,'M','731 Fondren, Houston, TX');
END;

create or replace procedure "UPDATE_SEATS_PRO"
(p_flight_code IN VARCHAR2,
p_class IN VARCHAR2,
p_seat_num IN VARCHAR2)
is
begin
DECLARE
    T_AVAIL_SEATS number;
    AVAIL_ECO_SEATS number;
    AVAIL_BUS_SEATS number;
    AVAIL_FIR_SEATS number;
    FL_CLASS VARCHAR(30);
BEGIN
    SELECT AVAIL_SEATS INTO T_AVAIL_SEATS FROM CABIN_DATA WHERE FLIGHT_CODE = p_flight_code;
    SELECT AVAIL_ECONOMY_CLASS INTO AVAIL_ECO_SEATS FROM CABIN_DATA WHERE FLIGHT_CODE = p_flight_code;
    SELECT AVAIL_BUSINESS_CLASS INTO AVAIL_BUS_SEATS FROM CABIN_DATA WHERE FLIGHT_CODE = p_flight_code;
    SELECT AVAIL_FIRST_CLASS INTO AVAIL_FIR_SEATS FROM CABIN_DATA WHERE FLIGHT_CODE = p_flight_code;
    IF T_AVAIL_SEATS > 0 THEN
        dbms_output.put_line('ALL SEATS ARE FULL IN FLIGHT');
    ELSE
        IF p_class = 'economy' OR p_class = 'ECONOMY' OR p_class = 'ECO' THEN
            FL_CLASS:='AVAIL_ECONOMY_CLASS';
            IF AVAIL_ECO_SEATS <= 0 THEN
                dbms_output.put_line('ALL SEATS ARE FULL IN ECONOMY CLASS');
            ELSE
                UPDATE CABIN_DATA SET AVAIL_SEATS=AVAIL_SEATS-1,
                AVAIL_ECONOMY_CLASS=AVAIL_ECONOMY_CLASS-1 
                WHERE FLIGHT_CODE=p_flight_code;
                COMMIT;
             END IF;
        ELSIF p_class = 'BUSINESS' OR p_class = 'business' OR p_class = 'busi' THEN
            FL_CLASS:='AVAIL_BUSINESS_CLASS';
            FL_CLASS:='AVAIL_ECONOMY_CLASS';
            IF AVAIL_ECO_SEATS <= 0 THEN
                dbms_output.put_line('ALL SEATS ARE FULL IN BUSINESS CLASS');
            ELSE
                UPDATE CABIN_DATA SET AVAIL_SEATS=AVAIL_SEATS-1,
                AVAIL_BUSINESS_CLASS=AVAIL_BUSINESS_CLASS-1 
                WHERE FLIGHT_CODE=p_flight_code;
                COMMIT;
            END IF;
        ELSE 
            FL_CLASS:='AVAIL_FIRST_CLASS';
            IF AVAIL_ECO_SEATS <= 0 THEN
                dbms_output.put_line('ALL SEATS ARE FULL IN BUSINESS CLASS');
            ELSE
                UPDATE CABIN_DATA SET AVAIL_SEATS=AVAIL_SEATS-1,
                AVAIL_FIRST_CLASS=AVAIL_FIRST_CLASS-1 
                WHERE FLIGHT_CODE=p_flight_code;
                COMMIT;
             END IF;
        END IF;
    END IF;
END;
END;
/
create or replace procedure "REM_PASSENGER_PRO"
(p_passenger_id IN NUMBER,
p_ticket_number IN NUMBER)
is
begin
BEGIN
    DELETE FROM PASSENGER_DATA WHERE PASSENGER_ID=p_passenger_id;
    COMMIT;
    
    DELETE FROM PASSENGER_DETAILS WHERE PASSENGER_ID=p_passenger_id;
    COMMIT;
    
    DELETE FROM TICKET WHERE PASSENGER_ID=p_passenger_id;
    COMMIT;
    
    DELETE FROM TICKET WHERE TICKET_NUMBER=p_ticket_number;
    COMMIT;
END;
end;
/